<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="codemirror/css/xmlcolors.css">
  <link rel="stylesheet" href="codemirror/css/csscolors.css">
  <link rel="stylesheet" href="codemirror/contrib/php/css/phpcolors.css">
  <link rel="stylesheet" href="codemirror/css/jscolors.css">
  <link rel="stylesheet" href="customcolors.css">
  <title></title>
  <script>
  </script>
  <style>
  </style>
</head>
<body style="border-width: 0;" class="editbox" spellcheck="false"><span class="xml-doctype">&lt;!DOCTYPE </span><span class="xml-doctype">html&gt;</span><br><span class="xml-punctuation">&lt;</span><span class="xml-tagname">html </span><span class="xml-attname">lang</span><span class="xml-punctuation">=</span><span class="xml-attribute">"en"</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">head</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">meta </span><span class="xml-attname">charset</span><span class="xml-punctuation">=</span><span class="xml-attribute">"utf-8" </span><span class="xml-punctuation">/&gt;</span><br><span class="whitespace">&nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">title</span><span class="xml-punctuation">&gt;</span><span class="xml-text">OnionSkin Prototype</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">title</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">link </span><span class="xml-attname">rel</span><span class="xml-punctuation">=</span><span class="xml-attribute">"stylesheet" </span><span class="xml-attname">href</span><span class="xml-punctuation">=</span><span class="xml-attribute">"http://mtcanvas.com/css/reset.css"</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">script </span><span class="xml-attname">src</span><span class="xml-punctuation">=</span><span class="xml-attribute">"http://code.jquery.com/jquery-latest.min.js"</span><span class="xml-punctuation">&gt;</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">script</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">script</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">os </span><span class="js-operator">= </span><span class="js-localvariable">os </span><span class="js-operator">|| </span><span class="js-punctuation">{</span><span class="js-punctuation">}</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">OnionSkin </span><span class="js-operator">= </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">win </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-variable">window</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">doc </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-variable">document</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">body </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-string">"body"</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">ui </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-string">"#ui"</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">renderer </span><span class="js-operator">= </span><span class="js-keyword">new </span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">Renderer</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">canvas </span><span class="js-operator">= </span><span class="js-keyword">new </span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">Canvas</span><span class="js-punctuation" style="font-weight: bold; color: rgb(136, 255, 136); ">(</span><span class="js-localvariable">renderer</span><span class="js-punctuation" style="font-weight: bold; color: rgb(136, 255, 136); ">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">timeline </span><span class="js-operator">= </span><span class="js-keyword">new </span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">Timeline</span><span class="js-punctuation">(</span><span class="js-localvariable">canvas</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">fileName </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-string">"#file-name"</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-string">"#save"</span><span class="js-punctuation">)</span><span class="js-punctuation">.</span><span class="js-property">click</span><span class="js-punctuation">(</span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">data </span><span class="js-operator">= </span><span class="js-variable">JSON</span><span class="js-punctuation">.</span><span class="js-property">stringify</span><span class="js-punctuation">(</span><span class="js-localvariable">canvas</span><span class="js-punctuation">.</span><span class="js-property">getData</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variable">$</span><span class="js-punctuation">.</span><span class="js-property">post</span><span class="js-punctuation">(</span><span class="js-string">"save.php"</span><span class="js-punctuation">, </span><span class="js-punctuation">{</span><span class="js-property">n </span><span class="js-punctuation">: </span><span class="js-localvariable">fileName</span><span class="js-punctuation">.</span><span class="js-property">val</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">, </span><span class="js-property">data </span><span class="js-punctuation">: </span><span class="js-localvariable">data </span><span class="js-punctuation">}</span><span class="js-punctuation">, </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variable">alert</span><span class="js-punctuation">(</span><span class="js-string">"Your file has been saved."</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">files </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-string">"#files"</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variable">$</span><span class="js-punctuation">.</span><span class="js-property">post</span><span class="js-punctuation">(</span><span class="js-string">"file-list.php"</span><span class="js-punctuation">, </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-variabledef">data</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">files</span><span class="js-punctuation">.</span><span class="js-property">append</span><span class="js-punctuation">(</span><span class="js-localvariable">data</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">files</span><span class="js-punctuation">.</span><span class="js-property">change</span><span class="js-punctuation">(</span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">val </span><span class="js-operator">= </span><span class="js-localvariable">files</span><span class="js-punctuation">.</span><span class="js-property">val</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">if </span><span class="js-punctuation">(</span><span class="js-localvariable">val </span><span class="js-operator">!= </span><span class="js-string">"--files"</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variable">$</span><span class="js-punctuation">.</span><span class="js-property">post</span><span class="js-punctuation">(</span><span class="js-string">"files/"</span><span class="js-operator">+</span><span class="js-localvariable">val</span><span class="js-operator">+</span><span class="js-string">".json"</span><span class="js-punctuation">, </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-variabledef">data</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">timeline</span><span class="js-punctuation">.</span><span class="js-property">setData</span><span class="js-punctuation">(</span><span class="js-localvariable">data</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">fileName</span><span class="js-punctuation">.</span><span class="js-property">val</span><span class="js-punctuation">(</span><span class="js-localvariable">val</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">Renderer </span><span class="js-operator">= </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">this</span><span class="js-punctuation">.</span><span class="js-property">render </span><span class="js-operator">= </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-variabledef">c</span><span class="js-punctuation">, </span><span class="js-variabledef">data</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">c</span><span class="js-punctuation">.</span><span class="js-property">beginPath</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">leng </span><span class="js-operator">= </span><span class="js-localvariable">data</span><span class="js-punctuation">.</span><span class="js-property">length</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">for </span><span class="js-punctuation">(</span><span class="js-keyword">var </span><span class="js-variabledef">i </span><span class="js-operator">= </span><span class="js-atom">0</span><span class="js-punctuation">; </span><span class="js-localvariable">i </span><span class="js-operator">&lt; </span><span class="js-localvariable">leng</span><span class="js-punctuation">; </span><span class="js-localvariable">i</span><span class="js-operator">++</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">line </span><span class="js-operator">= </span><span class="js-localvariable">data</span><span class="js-punctuation">[</span><span class="js-localvariable">i</span><span class="js-punctuation">]</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">lineLeng </span><span class="js-operator">= </span><span class="js-localvariable">line</span><span class="js-punctuation">.</span><span class="js-property">length</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">for </span><span class="js-punctuation">(</span><span class="js-keyword">var </span><span class="js-variabledef">j </span><span class="js-operator">= </span><span class="js-atom">0</span><span class="js-punctuation">; </span><span class="js-localvariable">j </span><span class="js-operator">&lt;</span><span class="js-localvariable">lineLeng</span><span class="js-punctuation">; </span><span class="js-localvariable">j</span><span class="js-operator">+=</span><span class="js-atom">2</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">if </span><span class="js-punctuation">(</span><span class="js-localvariable">j </span><span class="js-operator">== </span><span class="js-atom">0</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">c</span><span class="js-punctuation">.</span><span class="js-property">moveTo</span><span class="js-punctuation">(</span><span class="js-localvariable">line</span><span class="js-punctuation">[</span><span class="js-localvariable">j</span><span class="js-punctuation">]</span><span class="js-punctuation">, </span><span class="js-localvariable">line</span><span class="js-punctuation">[</span><span class="js-localvariable">j</span><span class="js-operator">+</span><span class="js-atom">1</span><span class="js-punctuation">]</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-keyword">else</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">c</span><span class="js-punctuation">.</span><span class="js-property">lineTo</span><span class="js-punctuation">(</span><span class="js-localvariable">line</span><span class="js-punctuation">[</span><span class="js-localvariable">j</span><span class="js-punctuation">]</span><span class="js-punctuation">, </span><span class="js-localvariable">line</span><span class="js-punctuation">[</span><span class="js-localvariable">j</span><span class="js-operator">+</span><span class="js-atom">1</span><span class="js-punctuation">]</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">c</span><span class="js-punctuation">.</span><span class="js-property">stroke</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">Canvas </span><span class="js-operator">= </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-variabledef">renderer</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">frame </span><span class="js-operator">= </span><span class="js-atom">0</span><span class="js-punctuation">,</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variabledef">frames </span><span class="js-operator">= </span><span class="js-punctuation">[</span><span class="js-punctuation">[</span><span class="js-punctuation">]</span><span class="js-punctuation">]</span><span class="js-punctuation">,</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variabledef">line </span><span class="js-operator">= </span><span class="js-atom">0</span><span class="js-punctuation">,</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variabledef">container </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-string">"#container"</span><span class="js-punctuation">)</span><span class="js-punctuation">, </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variabledef">canvas </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-string">"&lt;canvas&gt;"</span><span class="js-punctuation">)</span><span class="js-punctuation">.</span><span class="js-property">appendTo</span><span class="js-punctuation">(</span><span class="js-localvariable">container</span><span class="js-punctuation">)</span><span class="js-punctuation">[</span><span class="js-atom">0</span><span class="js-punctuation">]</span><span class="js-punctuation">, </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variabledef">c </span><span class="js-operator">= </span><span class="js-localvariable">canvas</span><span class="js-punctuation">.</span><span class="js-property">getContext</span><span class="js-punctuation">(</span><span class="js-string">"2d"</span><span class="js-punctuation">)</span><span class="js-punctuation">,</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variabledef">px</span><span class="js-punctuation">, </span><span class="js-variabledef">py</span><span class="js-punctuation">,</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variabledef">offY </span><span class="js-operator">= </span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">ui</span><span class="js-punctuation">.</span><span class="js-property">outerHeight</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">this</span><span class="js-punctuation">.</span><span class="js-property">onionSkin </span><span class="js-operator">= </span><span class="js-atom">true</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">canvas</span><span class="js-punctuation">.</span><span class="js-property">width </span><span class="js-operator">= </span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">win</span><span class="js-punctuation">.</span><span class="js-property">width</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">canvas</span><span class="js-punctuation">.</span><span class="js-property">height </span><span class="js-operator">= </span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">win</span><span class="js-punctuation">.</span><span class="js-property">height</span><span class="js-punctuation">(</span><span class="js-punctuation">) </span><span class="js-operator">- </span><span class="js-localvariable">offY</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">this</span><span class="js-punctuation">.</span><span class="js-property">getData </span><span class="js-operator">= </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">return </span><span class="js-localvariable">frames</span><span class="js-punctuation">;&nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">this</span><span class="js-punctuation">.</span><span class="js-property">setData </span><span class="js-operator">= </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-variabledef">data</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">frame </span><span class="js-operator">= </span><span class="js-atom">0</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">frames </span><span class="js-operator">= </span><span class="js-localvariable">data</span><span class="js-punctuation">.</span><span class="js-property">concat</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">; </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">playFrame </span><span class="js-operator">= </span><span class="js-atom">0</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">playCount </span><span class="js-operator">= </span><span class="js-atom">0</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">playId</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">this</span><span class="js-punctuation">.</span><span class="js-property">play </span><span class="js-operator">= </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">self</span><span class="js-operator">= </span><span class="js-localvariable">this</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="js-localvariable">self</span><span class="js-punctuation">.</span><span class="js-property">stop</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">playId </span><span class="js-operator">= </span><span class="js-variable">setInterval</span><span class="js-punctuation">(</span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-comment">// no need for playCount :/</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">if </span><span class="js-punctuation">(</span><span class="js-localvariable">playCount </span><span class="js-operator">== </span><span class="js-atom">0</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">playFrame </span><span class="js-operator">= </span><span class="js-localvariable">frame</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">self</span><span class="js-punctuation">.</span><span class="js-property">onionSkin </span><span class="js-operator">= </span><span class="js-atom">false</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">playFrame</span><span class="js-operator">++</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">self</span><span class="js-punctuation">.</span><span class="js-property">gotoAndStop</span><span class="js-punctuation">(</span><span class="js-localvariable">playFrame </span><span class="js-operator">% </span><span class="js-localvariable">frames</span><span class="js-punctuation">.</span><span class="js-property">length</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">, </span><span class="js-atom">90</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">this</span><span class="js-punctuation">.</span><span class="js-property">stop </span><span class="js-operator">= </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variable">clearInterval</span><span class="js-punctuation">(</span><span class="js-localvariable">playId</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">playCount </span><span class="js-operator">= </span><span class="js-atom">0</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">this</span><span class="js-punctuation">.</span><span class="js-property">gotoAndStop</span><span class="js-punctuation">(</span><span class="js-localvariable">frame</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">this</span><span class="js-punctuation">.</span><span class="js-property">onionSkin </span><span class="js-operator">= </span><span class="js-atom">true</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">this</span><span class="js-punctuation">.</span><span class="js-property">addFrame </span><span class="js-operator">= </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">frame</span><span class="js-operator">++</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">frames</span><span class="js-punctuation">[</span><span class="js-localvariable">frame</span><span class="js-punctuation">] </span><span class="js-operator">= </span><span class="js-punctuation">[</span><span class="js-punctuation">]</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">line </span><span class="js-operator">= </span><span class="js-atom">0</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">this</span><span class="js-punctuation">.</span><span class="js-property">gotoAndStop</span><span class="js-punctuation">(</span><span class="js-localvariable">frame</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">this</span><span class="js-punctuation">.</span><span class="js-property">gotoAndStop </span><span class="js-operator">= </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-variabledef">frameNum</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">frame </span><span class="js-operator">= </span><span class="js-variable">parseInt</span><span class="js-punctuation">(</span><span class="js-localvariable">frameNum</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">line </span><span class="js-operator">= </span><span class="js-localvariable">frames</span><span class="js-punctuation">[</span><span class="js-localvariable">frame</span><span class="js-punctuation">]</span><span class="js-punctuation">.</span><span class="js-property">length</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">c</span><span class="js-punctuation">.</span><span class="js-property">clearRect</span><span class="js-punctuation">(</span><span class="js-atom">0</span><span class="js-punctuation">, </span><span class="js-atom">0</span><span class="js-punctuation">, </span><span class="js-localvariable">canvas</span><span class="js-punctuation">.</span><span class="js-property">width</span><span class="js-punctuation">, </span><span class="js-localvariable">canvas</span><span class="js-punctuation">.</span><span class="js-property">height</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">if </span><span class="js-punctuation">(</span><span class="js-localvariable">this</span><span class="js-punctuation">.</span><span class="js-property">onionSkin</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">c</span><span class="js-punctuation">.</span><span class="js-property">strokeStyle</span><span class="js-operator">=</span><span class="js-string">"rgba(0,0,0,0.3)"</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">if </span><span class="js-punctuation">(</span><span class="js-localvariable">frame </span><span class="js-operator">&gt; </span><span class="js-atom">0</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">renderer</span><span class="js-punctuation">.</span><span class="js-property">render</span><span class="js-punctuation">(</span><span class="js-localvariable">c</span><span class="js-punctuation">, </span><span class="js-localvariable">frames</span><span class="js-punctuation">[</span><span class="js-localvariable">frame</span><span class="js-operator">-</span><span class="js-atom">1</span><span class="js-punctuation">]</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">if </span><span class="js-punctuation">(</span><span class="js-localvariable">frame </span><span class="js-operator">&lt; </span><span class="js-localvariable">frames</span><span class="js-punctuation">.</span><span class="js-property">length</span><span class="js-operator">-</span><span class="js-atom">1</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">renderer</span><span class="js-punctuation">.</span><span class="js-property">render</span><span class="js-punctuation">(</span><span class="js-localvariable">c</span><span class="js-punctuation">, </span><span class="js-localvariable">frames</span><span class="js-punctuation">[</span><span class="js-localvariable">frame</span><span class="js-operator">+</span><span class="js-atom">1</span><span class="js-punctuation">]</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">c</span><span class="js-punctuation">.</span><span class="js-property">strokeStyle</span><span class="js-operator">=</span><span class="js-string">"black"</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">renderer</span><span class="js-punctuation">.</span><span class="js-property">render</span><span class="js-punctuation">(</span><span class="js-localvariable">c</span><span class="js-punctuation">, </span><span class="js-localvariable">frames</span><span class="js-punctuation">[</span><span class="js-localvariable">frame</span><span class="js-punctuation">]</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">function </span><span class="js-variabledef">returnFalse</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">return </span><span class="js-atom">false</span><span class="js-punctuation">; </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-localvariable">canvas</span><span class="js-punctuation">)</span><span class="js-punctuation">.</span><span class="js-property">mousedown</span><span class="js-punctuation">(</span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-variabledef">e</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">px </span><span class="js-operator">= </span><span class="js-localvariable">e</span><span class="js-punctuation">.</span><span class="js-property">pageX</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">py </span><span class="js-operator">= </span><span class="js-localvariable">e</span><span class="js-punctuation">.</span><span class="js-property">pageY </span><span class="js-operator">- </span><span class="js-localvariable">offY</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">frames</span><span class="js-punctuation">[</span><span class="js-localvariable">frame</span><span class="js-punctuation">]</span><span class="js-punctuation">[</span><span class="js-localvariable">line</span><span class="js-operator">++</span><span class="js-punctuation">] </span><span class="js-operator">= </span><span class="js-punctuation">[</span><span class="js-localvariable">px</span><span class="js-punctuation">, </span><span class="js-localvariable">py</span><span class="js-punctuation">]</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">doc</span><span class="js-punctuation">.</span><span class="js-property">on</span><span class="js-punctuation">(</span><span class="js-string">"mousemove.draw"</span><span class="js-punctuation">, </span><span class="js-variable">draw</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">body</span><span class="js-punctuation">.</span><span class="js-property">on</span><span class="js-punctuation">(</span><span class="js-string">"selectstart.drag dragstart.drag mousedown.drag"</span><span class="js-punctuation">, </span><span class="js-localvariable">returnFalse</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">doc</span><span class="js-punctuation">.</span><span class="js-property">mouseup</span><span class="js-punctuation">(</span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-comment">//console.log(frames);</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">body</span><span class="js-punctuation">.</span><span class="js-property">off</span><span class="js-punctuation">(</span><span class="js-string">"selectstart.drag dragstart.drag mousedown.drag"</span><span class="js-punctuation">, </span><span class="js-localvariable">returnFalse</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">doc</span><span class="js-punctuation">.</span><span class="js-property">off</span><span class="js-punctuation">(</span><span class="js-string">"mousemove.draw"</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">function </span><span class="js-variabledef">draw</span><span class="js-punctuation">(</span><span class="js-variabledef">e</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">c</span><span class="js-punctuation">.</span><span class="js-property">lineStyle </span><span class="js-operator">= </span><span class="js-string">"black"</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">c</span><span class="js-punctuation">.</span><span class="js-property">beginPath</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">c</span><span class="js-punctuation">.</span><span class="js-property">moveTo</span><span class="js-punctuation">(</span><span class="js-localvariable">px</span><span class="js-punctuation">, </span><span class="js-localvariable">py</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">c</span><span class="js-punctuation">.</span><span class="js-property">lineTo</span><span class="js-punctuation">(</span><span class="js-localvariable">e</span><span class="js-punctuation">.</span><span class="js-property">pageX</span><span class="js-punctuation">, </span><span class="js-localvariable">e</span><span class="js-punctuation">.</span><span class="js-property">pageY </span><span class="js-operator">- </span><span class="js-localvariable">offY</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">c</span><span class="js-punctuation">.</span><span class="js-property">stroke</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">frames</span><span class="js-punctuation">[</span><span class="js-localvariable">frame</span><span class="js-punctuation">]</span><span class="js-punctuation">[</span><span class="js-localvariable">line</span><span class="js-operator">-</span><span class="js-atom">1</span><span class="js-punctuation">]</span><span class="js-punctuation">.</span><span class="js-property">push</span><span class="js-punctuation">(</span><span class="js-localvariable">e</span><span class="js-punctuation">.</span><span class="js-property">pageX</span><span class="js-punctuation">, </span><span class="js-localvariable">e</span><span class="js-punctuation">.</span><span class="js-property">pageY </span><span class="js-operator">- </span><span class="js-localvariable">offY</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">px </span><span class="js-operator">= </span><span class="js-localvariable">e</span><span class="js-punctuation">.</span><span class="js-property">pageX</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">py </span><span class="js-operator">= </span><span class="js-localvariable">e</span><span class="js-punctuation">.</span><span class="js-property">pageY </span><span class="js-operator">- </span><span class="js-localvariable">offY</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">Timeline </span><span class="js-operator">= </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-variabledef">canvas</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">add </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-string">"#add"</span><span class="js-punctuation">)</span><span class="js-punctuation">, </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variabledef">frameNumUI </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-string">"#frameNum"</span><span class="js-punctuation">)</span><span class="js-punctuation">,</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variabledef">stopUI </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-string">"#stop"</span><span class="js-punctuation">)</span><span class="js-punctuation">,</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variabledef">timeline </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-string">"#timeline"</span><span class="js-punctuation">)</span><span class="js-punctuation">, </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variabledef">play </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-string">"#play"</span><span class="js-punctuation">)</span><span class="js-punctuation">,</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variabledef">frameNum </span><span class="js-operator">= </span><span class="js-atom">1</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">this</span><span class="js-punctuation">.</span><span class="js-property">setData </span><span class="js-operator">= </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-variabledef">data</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">data </span><span class="js-operator">= </span><span class="js-variable">JSON</span><span class="js-punctuation">.</span><span class="js-property">parse</span><span class="js-punctuation">(</span><span class="js-localvariable">data</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">frameNum </span><span class="js-operator">= </span><span class="js-atom">0</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">timeline</span><span class="js-punctuation">.</span><span class="js-property">html</span><span class="js-punctuation">(</span><span class="js-string">""</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">for </span><span class="js-punctuation">(</span><span class="js-keyword">var </span><span class="js-variabledef">i </span><span class="js-operator">= </span><span class="js-atom">0</span><span class="js-punctuation">; </span><span class="js-localvariable">i </span><span class="js-operator">&lt;</span><span class="js-localvariable">data</span><span class="js-punctuation">.</span><span class="js-property">length</span><span class="js-punctuation">; </span><span class="js-localvariable">i</span><span class="js-operator">++</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variable">addFrame</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">; </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">canvas</span><span class="js-punctuation">.</span><span class="js-property">setData</span><span class="js-punctuation">(</span><span class="js-localvariable">data</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">canvas</span><span class="js-punctuation">.</span><span class="js-property">gotoAndStop</span><span class="js-punctuation">(</span><span class="js-atom">0</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">timeline</span><span class="js-punctuation">.</span><span class="js-property">find</span><span class="js-punctuation">(</span><span class="js-string">"div"</span><span class="js-punctuation">)</span><span class="js-punctuation">.</span><span class="js-property">first</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">.</span><span class="js-property">trigger</span><span class="js-punctuation">(</span><span class="js-string">"mousedown"</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">stopUI</span><span class="js-punctuation">.</span><span class="js-property">click</span><span class="js-punctuation">(</span><span class="js-variable">stop</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">function </span><span class="js-variabledef">stop</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">canvas</span><span class="js-punctuation">.</span><span class="js-property">stop</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">; </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">play</span><span class="js-punctuation">.</span><span class="js-property">click</span><span class="js-punctuation">(</span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">canvas</span><span class="js-punctuation">.</span><span class="js-property">play</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">doc</span><span class="js-punctuation">.</span><span class="js-property">keyup</span><span class="js-punctuation">(</span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-variabledef">e</span><span class="js-punctuation">)</span><span class="js-punctuation">{ </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">if </span><span class="js-punctuation">(</span><span class="js-localvariable">e</span><span class="js-punctuation">.</span><span class="js-property">which </span><span class="js-operator">== </span><span class="js-atom">32</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variable">addFrame</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-keyword">else </span><span class="js-keyword">if </span><span class="js-punctuation">(</span><span class="js-localvariable">e</span><span class="js-punctuation">.</span><span class="js-property">which </span><span class="js-operator">== </span><span class="js-atom">39</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">canvas</span><span class="js-punctuation">.</span><span class="js-property">play</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">function </span><span class="js-variabledef">addFrame</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">canvas</span><span class="js-punctuation">.</span><span class="js-property">addFrame</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-string">"&lt;div class='frame'&gt;"</span><span class="js-punctuation">)</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">.</span><span class="js-property">attr</span><span class="js-punctuation">(</span><span class="js-string">"data-num"</span><span class="js-punctuation">, </span><span class="js-localvariable">frameNum</span><span class="js-operator">++</span><span class="js-punctuation">)</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">.</span><span class="js-property">appendTo</span><span class="js-punctuation">(</span><span class="js-localvariable">timeline</span><span class="js-punctuation">)</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">.</span><span class="js-property">trigger</span><span class="js-punctuation">(</span><span class="js-string">"mousedown"</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">frameNumUI</span><span class="js-punctuation">.</span><span class="js-property">text</span><span class="js-punctuation">(</span><span class="js-localvariable">frameNum</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">currFrame</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">doc</span><span class="js-punctuation">.</span><span class="js-property">on</span><span class="js-punctuation">(</span><span class="js-string">"click"</span><span class="js-punctuation">, </span><span class="js-string">".frame"</span><span class="js-punctuation">, </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">var </span><span class="js-variabledef">num </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-localvariable">this</span><span class="js-punctuation">)</span><span class="js-punctuation">.</span><span class="js-property">attr</span><span class="js-punctuation">(</span><span class="js-string">"data-num"</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">canvas</span><span class="js-punctuation">.</span><span class="js-property">gotoAndStop</span><span class="js-punctuation">(</span><span class="js-localvariable">num</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">frameNumUI</span><span class="js-punctuation">.</span><span class="js-property">text</span><span class="js-punctuation">(</span><span class="js-variable">parseInt</span><span class="js-punctuation">(</span><span class="js-localvariable">num</span><span class="js-punctuation">) </span><span class="js-operator">+ </span><span class="js-atom">1</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">.</span><span class="js-property">on</span><span class="js-punctuation">(</span><span class="js-string">"mousedown"</span><span class="js-punctuation">, </span><span class="js-string">".frame"</span><span class="js-punctuation">, </span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">if </span><span class="js-punctuation">(</span><span class="js-localvariable">currFrame</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">currFrame</span><span class="js-punctuation">.</span><span class="js-property">css</span><span class="js-punctuation">(</span><span class="js-punctuation">{</span><span class="js-property">backgroundColor </span><span class="js-punctuation">: </span><span class="js-string">"#ccc"</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">currFrame </span><span class="js-operator">= </span><span class="js-variable">$</span><span class="js-punctuation">(</span><span class="js-localvariable">this</span><span class="js-punctuation">)</span><span class="js-punctuation">.</span><span class="js-property">css</span><span class="js-punctuation">(</span><span class="js-punctuation">{</span><span class="js-property">backgroundColor </span><span class="js-punctuation">: </span><span class="js-string">"gray"</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">add</span><span class="js-punctuation">.</span><span class="js-property">click</span><span class="js-punctuation">(</span><span class="js-keyword">function</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-localvariable">addFrame</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-keyword">new </span><span class="js-localvariable">os</span><span class="js-punctuation">.</span><span class="js-property">OnionSkin</span><span class="js-punctuation">(</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="js-punctuation">}</span><span class="js-punctuation">)</span><span class="js-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">script</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">style</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-selector">body</span><span class="css-select-op">,</span><span class="css-selector">html</span><span class="css-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">font-family </span><span class="css-punctuation">: </span><span class="css-value">Helvetica</span><span class="css-select-op">, </span><span class="css-value">sans-serif</span><span class="css-punctuation">; </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">font-size </span><span class="css-punctuation">: </span><span class="css-unit">13px</span><span class="css-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">overflow </span><span class="css-punctuation">: </span><span class="css-value">hidden</span><span class="css-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-selector">div</span><span class="css-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">position </span><span class="css-punctuation">: </span><span class="css-value">relative</span><span class="css-punctuation">; </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-selector">h1</span><span class="css-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">font-size </span><span class="css-punctuation">: </span><span class="css-unit">20px</span><span class="css-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">margin-bottom </span><span class="css-punctuation">: </span><span class="css-unit">10px</span><span class="css-punctuation">; </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-selector">#ui</span><span class="css-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">padding </span><span class="css-punctuation">: </span><span class="css-unit">5px</span><span class="css-punctuation">; </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-selector">#timeline</span><span class="css-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">height </span><span class="css-punctuation">: </span><span class="css-unit">20px</span><span class="css-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">border </span><span class="css-punctuation">: </span><span class="css-unit">1px </span><span class="css-value">solid </span><span class="css-colorcode">#666</span><span class="css-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">overflow-x </span><span class="css-punctuation">: </span><span class="css-value">auto</span><span class="css-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">overflow-y </span><span class="css-punctuation">: </span><span class="css-value">hidden</span><span class="css-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-select-op">.</span><span class="css-selector">frame</span><span class="css-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">float </span><span class="css-punctuation">: </span><span class="css-value">left</span><span class="css-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">width </span><span class="css-punctuation">: </span><span class="css-unit">10px</span><span class="css-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">height </span><span class="css-punctuation">: </span><span class="css-unit">20px</span><span class="css-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">border-right </span><span class="css-punctuation">: </span><span class="css-unit">1px </span><span class="css-value">solid </span><span class="css-colorcode">#666</span><span class="css-punctuation">;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">background-color </span><span class="css-punctuation">: </span><span class="css-colorcode">#ccc</span><span class="css-punctuation">; </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-selector">#files</span><span class="css-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">width </span><span class="css-punctuation">: </span><span class="css-unit">100px</span><span class="css-punctuation">; </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-selector">canvas</span><span class="css-punctuation">{</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-identifier">background-color </span><span class="css-punctuation">: </span><span class="css-colorcode">#efefef</span><span class="css-punctuation">; </span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="css-punctuation">}</span><br><span class="whitespace">&nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">style</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp;&nbsp;</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">head</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">body</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">div </span><span class="xml-attname">id</span><span class="xml-punctuation">=</span><span class="xml-attribute">"ui"</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">h1</span><span class="xml-punctuation">&gt;</span><span class="xml-text">OnionSkin - speed coded prototype</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">h1</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-text">frame : </span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">span </span><span class="xml-attname">id</span><span class="xml-punctuation">=</span><span class="xml-attribute">"frameNum"</span><span class="xml-punctuation">&gt;</span><span class="xml-text">1</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">span</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">div </span><span class="xml-attname">id</span><span class="xml-punctuation">=</span><span class="xml-attribute">"timeline"</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">div </span><span class="xml-attname">class</span><span class="xml-punctuation">=</span><span class="xml-attribute">"frame" </span><span class="xml-attname">data-num</span><span class="xml-punctuation">=</span><span class="xml-attribute">"0"</span><span class="xml-punctuation">&gt;</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">div</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">div</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">button </span><span class="xml-attname">id</span><span class="xml-punctuation">=</span><span class="xml-attribute">"play"</span><span class="xml-punctuation">&gt;</span><span class="xml-entity">&amp;#9658;</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">button</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">button </span><span class="xml-attname">id</span><span class="xml-punctuation">=</span><span class="xml-attribute">"stop"</span><span class="xml-punctuation">&gt;</span><span class="xml-text">stop</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">button</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">button </span><span class="xml-attname">id</span><span class="xml-punctuation">=</span><span class="xml-attribute">"add"</span><span class="xml-punctuation">&gt;</span><span class="xml-text">add frame</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">button</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">input </span><span class="xml-attname">type</span><span class="xml-punctuation">=</span><span class="xml-attribute">"checkbox" </span><span class="xml-attname">id</span><span class="xml-punctuation">=</span><span class="xml-attribute">"toggleOnion" </span><span class="xml-attname">checked</span><span class="xml-punctuation">/&gt; </span><span class="xml-text">onion skinning</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-text">||</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">input </span><span class="xml-attname">id</span><span class="xml-punctuation">=</span><span class="xml-attribute">"file-name" </span><span class="xml-attname">type</span><span class="xml-punctuation">=</span><span class="xml-attribute">"text" </span><span class="xml-attname">placeholder</span><span class="xml-punctuation">=</span><span class="xml-attribute">"file name" </span><span class="xml-punctuation">/&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">button </span><span class="xml-attname">id</span><span class="xml-punctuation">=</span><span class="xml-attribute">"save"</span><span class="xml-punctuation">&gt;</span><span class="xml-text">save</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">button</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-text">||</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-text">open : </span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">select </span><span class="xml-attname">id</span><span class="xml-punctuation">=</span><span class="xml-attribute">"files"</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">option</span><span class="xml-punctuation">&gt;</span><span class="xml-text">--files</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">option</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">select</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">div</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;</span><span class="xml-tagname">div </span><span class="xml-attname">id</span><span class="xml-punctuation">=</span><span class="xml-attribute">"container"</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp; &nbsp; &nbsp;&nbsp;</span><br><span class="whitespace">&nbsp; &nbsp;&nbsp;</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">div</span><span class="xml-punctuation">&gt;</span><br><span class="whitespace">&nbsp;&nbsp;</span><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">body</span><span class="xml-punctuation">&gt;</span><br><span class="xml-punctuation">&lt;/</span><span class="xml-tagname">html</span><span class="xml-punctuation">&gt;</span><br></body>
</html>